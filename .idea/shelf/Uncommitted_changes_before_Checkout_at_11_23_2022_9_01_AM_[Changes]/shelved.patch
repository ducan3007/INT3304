Index: bingo.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import numpy as np\r\nimport random\r\nfrom colorama import Fore, Back, Style\r\n\r\n\r\nclass Bingo:\r\n    def __init__(self, x):\r\n\r\n        # Số hàng và cột\r\n        self.x = int(x)\r\n\r\n        # Lưu lịch sử\r\n        self.history = dict()  # {num: (pos_x, pos_y)}\r\n\r\n        # Mảng 2 chiều lưu trữ bảng, init = 0\r\n        self.game_board = np.zeros((x, x), dtype=int)  # [[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]]\r\n\r\n        # Lưu các đường nằm ngang, dọc, chéo, khởi tạo bằng 0,\r\n        self.game_info = {\r\n            \"row\": np.zeros(x),  # [5,0,0,0,0] : có 5 phần tử có vị trị y = 0\r\n            \"col\": np.zeros(x),\r\n            \"cross\": np.zeros(2)\r\n        }\r\n\r\n        # Số đường thẳng, lines = x thì Win\r\n        self.lines = 0\r\n\r\n        # Tạo bảng\r\n        self.board()\r\n\r\n        # Random board\r\n\r\n    # Khởi tạo bảng\r\n\r\n    def board(self):\r\n        nums = [i for i in range(1, self.x**2+1)]\r\n        for i in range(self.x):\r\n            for j in range(self.x):\r\n                ran = random.choice(nums)\r\n                self.game_board[i][j] = ran\r\n                nums.pop(nums.index(ran))\r\n\r\n    # Tìm vị trí của số trong bảng\r\n\r\n    def pos(self, num):\r\n        for i in range(self.x):\r\n            for j in range(self.x):\r\n                if self.game_board[i][j] == num:\r\n                    return (j, i)\r\n\r\n    # Cập nhật game_info sau khi chọn một ô\r\n    def update(self, pos_x, pos_y, num):\r\n        self.history[num] = (pos_x, pos_y)\r\n        self.game_info[\"row\"][pos_x] += 1\r\n        self.game_info[\"col\"][pos_y] += 1\r\n        if (pos_x == pos_y):\r\n            self.game_info[\"cross\"][0] += 1\r\n\r\n        if (pos_x + pos_y == self.x - 1):\r\n            self.game_info[\"cross\"][1] += 1\r\n\r\n    # Thắng khi có 5 đường thẳng\r\n    def isWin(self):\r\n        lines = 0\r\n        for i in range(self.x):\r\n            if self.game_info[\"row\"][i] == self.x:\r\n                lines += 1\r\n            if self.game_info[\"col\"][i] == self.x:\r\n                lines += 1\r\n            if (i < 2):\r\n                if self.game_info[\"cross\"][i] == self.x:\r\n                    lines += 1\r\n\r\n        if lines >= self.x:\r\n            return lines\r\n\r\n        return False\r\n\r\n    def printBoard(self):\r\n        print(\"BINGO: \")\r\n        for i in range(self.x):\r\n            for j in range(self.x):\r\n                if (self.game_board[i][j] in self.history):\r\n                    print(Fore.RED + str(self.game_board[i][j]) + Style.RESET_ALL, end=\" \")\r\n                else:\r\n                    print(self.game_board[i][j], end=\" \")\r\n            print()\r\n\r\n    def validate(self, num):\r\n        if num.strip().isdigit() is not True:\r\n            return 'INVALID'\r\n\r\n        if int(num) in self.history:\r\n            return 'DUPLICATE'\r\n\r\n        return int(num)\r\n\r\n\r\nif __name__ == '__main__':\r\n\r\n    matrix = input(\"Nhập kích thước mảng \")\r\n\r\n    while matrix.strip().isdigit() is not True:\r\n\r\n        matrix = input(\"Nhập kích thước mảng \")\r\n        print(type(matrix))\r\n\r\n    Bingo = Bingo(int(matrix))\r\n    Bingo.board()\r\n    Bingo.printBoard()\r\n\r\n    while True:\r\n        _input = input(\"Nhập số cần đánh dấu \")\r\n\r\n        valid = Bingo.validate(_input)\r\n\r\n        if (valid == 'INVALID'):\r\n            print('Đầu vào ko hợp lệ')\r\n            continue\r\n        if (valid == 'DUPLICATE'):\r\n            print('Số đã được chọn')\r\n            continue\r\n\r\n        a, b = Bingo.pos(valid)\r\n        \r\n        Bingo.update(a, b, valid)\r\n\r\n        # in bảng sau mỗi lần nhập\r\n        Bingo.printBoard()\r\n        print('lines: ', Bingo.isWin())\r\n\r\n        if (Bingo.isWin() is not False):\r\n            break\r\n\r\n    print(\"Win!\")\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/bingo.py b/bingo.py
--- a/bingo.py	(revision 224e486aac2b149aafb5717515fc808becbcf7d2)
+++ b/bingo.py	(date 1669166965351)
@@ -71,7 +71,7 @@
                 if self.game_info["cross"][i] == self.x:
                     lines += 1
 
-        if lines >= self.x:
+        if lines >= 3:
             return lines
 
         return False
